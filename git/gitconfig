# Main gitconfig (tracked in dotfiles, symlinked to ~/.gitconfig)
# User identity stored in ~/.gitconfig.user (not tracked in dotfiles)
# Run ./scripts/setup-git-user.sh to configure
[include]
	path = ~/.gitconfig.user

[color]
	ui = auto
[alias]
	# Basic shortcuts
	co = checkout
	br = branch
	ci = commit
	st = status
	a = add
	p = push
	d = diff

	# Advanced aliases
	up = !git pull --rebase --prune $@ && git submodule update --init --recursive
	undo = reset HEAD~1 --mixed
	amend = commit -a --amend
	wipe = !git add -A && git commit -qm 'WIPE SAVEPOINT' && git reset HEAD~1 --hard

	# Logging
	l = log --oneline --decorate --graph --color
	log1 = log --oneline --graph --decorate
	logp = log --pretty=format:'%h - %an, %ar : %s'
	lg = log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit
	ll = log --pretty=format:"%C(yellow)%h%Cred%d\\ %Creset%s%Cblue\\ [%cn]" --decorate --numstat

	# Show branches with their last commits
	recent = for-each-ref --count=10 --sort=-committerdate refs/heads/ --format="%(refname:short)"

	# Show ignored files
	ignored = ls-files --others --ignored --exclude-standard

	# Unstage files
	unstage = reset HEAD --

	# Show what I did today
	today = "!git log --since='6am' --oneline --author=\"$(git config user.email)\""

	# Clean merged branches
	cleanup = !git branch --merged | grep -v '\\*\\|master\\|main\\|develop' | xargs -n 1 git branch -d
[core]
	editor = vim
	excludesfile = ~/.gitignore.global
	autocrlf = input
	whitespace = trailing-space,space-before-tab
	pager = delta

[push]
	default = simple
	followTags = true

[pull]
	rebase = true

[merge]
	tool = vimdiff

[diff]
	tool = vimdiff
	colorMoved = default

[init]
	defaultBranch = main

[branch]
	autosetupmerge = always
	autosetuprebase = always

[rerere]
	enabled = true

[help]
	autocorrect = 1

[delta]
	navigate = true
	light = false
	line-numbers = true
	side-by-side = true

[interactive]
	diffFilter = delta --color-only

# Machine-specific overrides (not tracked)
[include]
	path = ~/.gitconfig.local
